<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Smart Study Assistant - Progress</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f8f9fd;
      margin: 0;
      padding: 20px;
      color: #333;
    }

    h1 {
      text-align: center;
      margin-bottom: 20px;
      color: #6C5CE7;
    }

    .grid-3 {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 15px;
      margin-bottom: 20px;
    }

    .card {
      background: #fff;
      border-radius: 12px;
      padding: 10px;
      box-shadow: 0 3px 8px rgba(0,0,0,0.1);
      text-align: center;
    }

    canvas {
      max-width: 100%;
      height: 180px !important; /* Smaller height so all fit */
    }

    .tasks {
      background: #fff;
      border-radius: 12px;
      padding: 15px;
      box-shadow: 0 3px 8px rgba(0,0,0,0.1);
    }

    ul {
      list-style: none;
      padding: 0;
      margin: 10px 0;
    }

    li {
      background: #f1f2f6;
      padding: 8px;
      margin: 6px 0;
      border-radius: 8px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    li.completed {
      background: #dfe6e9;
      text-decoration: line-through;
      color: #636e72;
    }

    input[type="checkbox"] {
      transform: scale(1.2);
      cursor: pointer;
    }

    .summary {
      margin-top: 10px;
      text-align: center;
      font-size: 1.1em;
    }

    .summary span {
      font-weight: bold;
      color: #6C5CE7;
    }

    /* body {
    margin: 0;
    padding: 0;
    font-family: Arial, sans-serif;
    background:#F5F7FA;
    transition: margin-left 0.4s ease-in-out;
  } */

  /* Sidebar */
  .slider {
   width: 200px;
   height: 100vh;
   background-color: #2563EB;
   position: fixed;
   top: 0;
   left: 0;
   transform: translateX(-200px); /* hidden */
   transition: transform 0.4s ease-in-out;
   color: white;
   padding: 20px 10px;
   box-sizing: border-box;
   z-index: 998;
   margin-top: 10px;
   display: flex;
    flex-direction: column;
    margin: 1px;
  }

  /* âœ… Corrected navbar selector */
  .navbar.bg-body-tertiary {
    background-color: #d2d9e6;
    color: white;
    display: flex;
    align-items: center;
    justify-content: space-between;
      padding: 10px 20px;
}
    
  

  /* Toggle button (inside navbar left) */
  .slidbtn {
   position: relative;  /* âœ… stays inside navbar */
   display: inline-block;
   margin-right: 10px;
   z-index: 999;
  

  }
  .slidbtn button {
   width: 40px;
   height: 40px;
   background-color: rgb(15, 16, 17);
   color: white;
   border: none;
   cursor: pointer;
   font-size: 20px;
   border-radius: 5px;
   transition: background 0.2s;
  }
  .slidbtn button:hover {
   background-color: rgb(30, 30, 30);
  }

  /* Main content */
  .content {
   padding: 20px;
   transition: margin-left 0.4s ease-in-out;
  }

  /* âœ… Sidebar open state */
  body.open .slider {
    transform: translateX(0);
  }
  body.open .content {
    margin-left: 200px;
  }



/* Sidebar */
.sidebar {
  position: fixed;
  top: 0;
  left: 0;
  width: 240px;
  height: 100%;
  background: linear-gradient(180deg, #007bff, #0056b3);
  padding: 20px;
  color: white;
  font-family: Arial, sans-serif;
  box-shadow: 2px 0 10px rgba(0,0,0,0.2);
}
/* Buttons */
.menu button {
  display: block;
  width: 100%;
  padding: 12px;
  margin: 10px 0;
  border: none;
  border-radius: 8px;
  background: white;
  color: #007bff;
  font-size: 16px;
  font-weight: bold;
  cursor: pointer;
  text-align: center;
  transition: all 0.3s ease;
}

/* Hover effect */
.menu button:hover {
  background: #0056b3;
  color: white;
  transform: translateX(5px);
}
.logout-btn {
  background: #111;
  color: white;
  padding: 10px 15px;
  border-radius: 6px;
  text-decoration: none;
  font-size: 16px;
  transition: background 0.3s ease;
}

.logout-btn:hover {
  background: #e63946; /* red on hover */
}


 
  
 
  

  </style>
</head>
<body>

  <!-- <h1>ðŸ“Š Study Progress</h1> -->
   <section>
    <nav class="navbar bg-body-tertiary">
      <div class="slidbtn">
        <button id="slider-btn" onclick="slidbar()">â˜°</button></div>
        <H1>ðŸ“Š Study Progress</H1>

  <a href="logout.html" class="logout-btn"><i class="fa-solid fa-right-from-bracket"></i> Logout</a>
</div>
</div>
    </nav>
  </section>
  
  <!-- Sidebar -->
  <div class="slider" id="slider">
<h2>Menu</h2>
<div class="menu">
  <button onclick="location.href='/'">Home</button><br>
  <button onclick="location.href='/dashboard/dashboard'">Dashboard</button><br>
  <button onclick="location.href='/planner/planner'">Planner</button><br>
  <button onclick="location.href='/chatbot/chatbot'">AI Chatbot</button><br>
  <button onclick="location.href='/ai-quiz/'">AI Quizzes</button><br>
  <button onclick="location.href='#'">Notes Summariser</button><br>
  <button onclick="location.href='/reminders/reminders'">Reminder</button><br>
  <button onclick="location.href='/progress/'">Progress</button><br>
</div>
</div>




  
  





  <!-- Three Graphs in One View -->
  <div class="grid-3">
    <div class="card">
      <h3>Weekly Hours</h3>
      <canvas id="weeklyChart"></canvas>
    </div>
    <div class="card">
      <h3>Subject %</h3>
      <canvas id="pieChart"></canvas>
    </div>
    <div class="card">
      <h3>Subject Progress</h3>
      <canvas id="barChart"></canvas>
    </div>
  </div>

  <!-- Task Completed List
  <div class="tasks">
    <h2>âœ… Completed Tasks</h2>
    <ul id="taskList">
      <li><input type="checkbox" checked> Finish Maths Assignment</li>
      <li><input type="checkbox" checked> Revise Science Chapter 3</li>
      <li><input type="checkbox"> Complete English Essay</li>
      <li><input type="checkbox"> Computer Lab Practice</li>
    </ul>
    <div class="summary">
      âœ… You studied <span>21.5 hours</span> this week.  
      Keep pushing towards your <span>30-hour goal!</span>
    </div>
  </div> -->


  <!-- Task Completed List -->
<div class="tasks">
  <h2>âœ… Completed Tasks</h2>
  <ul id="taskList">
    <!-- Dynamic tasks will load here -->
  </ul>
  <div class="summary" id="summaryBox">
    <!-- Dynamic summary will load here -->
  </div>
</div>


  <!-- <script>
   function slidbar() {
   document.body.classList.toggle("open");  

   const sliderBtn = document.getElementById("slider-btn");

   if (document.body.classList.contains("open")) {
     sliderBtn.style.display = "none"; // hide â˜° when sidebar opens
   } else {
     sliderBtn.style.display = "inline-block"; // show â˜° again when closed
   }
 }

 // âœ… Add click event to "Menu" heading for closing
 document.addEventListener("DOMContentLoaded", function() {
   const menuHeading = document.querySelector(".slider h2");
   menuHeading.addEventListener("click", function() {
     document.body.classList.remove("open"); // close sidebar
     document.getElementById("slider-btn").style.display = "inline-block"; // show â˜° again
   });
 });

    // Weekly Chart (Line)
    new Chart(document.getElementById('weeklyChart'), {
      type: 'line',
      data: {
        labels: ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"],
        datasets: [{
          data: [2, 3, 1.5, 4, 2.5, 3.5, 5],
          borderColor: "#6C5CE7",
          backgroundColor: "rgba(108, 92, 231, 0.2)",
          fill: true,
          tension: 0.3,
          borderWidth: 2,
          pointBackgroundColor: "#6C5CE7"
        }]
      },
      options: { plugins: { legend: { display: false } } }
    });

    // Pie Chart
    new Chart(document.getElementById('pieChart'), {
      type: 'pie',
      data: {
        labels: ["Maths", "Science", "English", "Computer"],
        datasets: [{
          data: [80, 60, 45, 70],
          backgroundColor: ["#6C5CE7", "#00b894", "#fd79a8", "#0984e3"]
        }]
      }
    });

    // Bar Chart (Progress per subject)
    new Chart(document.getElementById('barChart'), {
      type: 'bar',
      data: {
        labels: ["Maths", "Science", "English", "Computer"],
        datasets: [{
          label: "Progress %",
          data: [80, 60, 45, 70],
          backgroundColor: ["#6C5CE7", "#00b894", "#fd79a8", "#0984e3"]
        }]
      },
      options: {
        plugins: { legend: { display: false } },
        scales: { y: { beginAtZero: true, max: 100 } }
      }
    });

    // Task Checkbox Toggle
    document.querySelectorAll("#taskList input[type='checkbox']").forEach((box) => {
      box.addEventListener("change", function() {
        if (this.checked) {
          this.parentElement.classList.add("completed");
        } else {
          this.parentElement.classList.remove("completed");
        }
      });
      if (box.checked) box.parentElement.classList.add("completed");
    });
  </script> -->








  <script>
  function slidbar() {
    document.body.classList.toggle("open");  
    const sliderBtn = document.getElementById("slider-btn");
    if (document.body.classList.contains("open")) {
      sliderBtn.style.display = "none"; 
    } else {
      sliderBtn.style.display = "inline-block";
    }
  }

  document.addEventListener("DOMContentLoaded", function() {
    const menuHeading = document.querySelector(".slider h2");
    menuHeading.addEventListener("click", function() {
      document.body.classList.remove("open");
      document.getElementById("slider-btn").style.display = "inline-block";
    });

    // ðŸ”¹ Load data from backend
    loadDashboardData();
  });

  async function loadDashboardData() {
    try {
      // Backend API call (URL apne backend ke hisaab se badlo)
      const response = await fetch("http://localhost:5000/api/progress");
      const data = await response.json();

      // ===== Weekly Chart =====
      new Chart(document.getElementById('weeklyChart'), {
        type: 'line',
        data: {
          labels: data.weekly.labels,
          datasets: [{
            data: data.weekly.values,
            borderColor: "#6C5CE7",
            backgroundColor: "rgba(108, 92, 231, 0.2)",
            fill: true,
            tension: 0.3,
            borderWidth: 2,
            pointBackgroundColor: "#6C5CE7"
          }]
        },
        options: { plugins: { legend: { display: false } } }
      });

      // ===== Pie Chart =====
      new Chart(document.getElementById('pieChart'), {
        type: 'pie',
        data: {
          labels: data.subjects.labels,
          datasets: [{
            data: data.subjects.values,
            backgroundColor: ["#6C5CE7", "#00b894", "#fd79a8", "#0984e3"]
          }]
        }
      });

      // ===== Bar Chart =====
      new Chart(document.getElementById('barChart'), {
        type: 'bar',
        data: {
          labels: data.subjects.labels,
          datasets: [{
            label: "Progress %",
            data: data.subjects.values,
            backgroundColor: ["#6C5CE7", "#00b894", "#fd79a8", "#0984e3"]
          }]
        },
        options: {
          plugins: { legend: { display: false } },
          scales: { y: { beginAtZero: true, max: 100 } }
        }
      });

      // ===== Tasks =====
      const taskList = document.getElementById("taskList");
      taskList.innerHTML = "";
      data.tasks.forEach(task => {
        const li = document.createElement("li");
        li.innerHTML = `<input type="checkbox" ${task.completed ? "checked" : ""}> ${task.title}`;
        if (task.completed) li.classList.add("completed");
        taskList.appendChild(li);
      });

      // Checkbox toggle effect
      taskList.querySelectorAll("input[type='checkbox']").forEach(box => {
        box.addEventListener("change", function () {
          if (this.checked) {
            this.parentElement.classList.add("completed");
          } else {
            this.parentElement.classList.remove("completed");
          }
          // Optional: backend update
          fetch("http://localhost:5000/api/update-task", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ title: this.parentElement.textContent.trim(), completed: this.checked })
          });
        });
      });

      // ===== Summary =====
      document.querySelector(".summary").innerHTML = `
        âœ… You studied <span>${data.summary.hours}</span> hours this week.  
        Keep pushing towards your <span>${data.summary.goal}</span> goal!
      `;

    } catch (err) {
      console.error("Error fetching data:", err);
    }
  }





  // ===== Tasks =====
const taskList = document.getElementById("taskList");
taskList.innerHTML = "";
data.tasks.forEach(task => {
  const li = document.createElement("li");
  li.innerHTML = `<input type="checkbox" ${task.completed ? "checked" : ""}> ${task.title}`;
  if (task.completed) li.classList.add("completed");
  taskList.appendChild(li);
});

// Checkbox toggle effect
taskList.querySelectorAll("input[type='checkbox']").forEach(box => {
  box.addEventListener("change", function () {
    if (this.checked) {
      this.parentElement.classList.add("completed");
    } else {
      this.parentElement.classList.remove("completed");
    }
    // Optional: backend update
    fetch("http://localhost:5000/api/update-task", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ 
        title: this.parentElement.textContent.trim(), 
        completed: this.checked 
      })
    });
  });
});

// ===== Summary =====
document.getElementById("summaryBox").innerHTML = `
  âœ… You studied <span>${data.summary.hours}</span> hours this week.  
  Keep pushing towards your <span>${data.summary.goal}-hour goal</span>!
`;

</script>


</body>
</html>






  

 
 







  
